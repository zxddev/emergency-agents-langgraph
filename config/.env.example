# ============================================
# AI Emergency Brain - Environment Configuration Template
# ============================================
# 使用说明：复制此文件为 dev.local.env 并填写实际值
# cp config/.env.example config/dev.local.env

# ============================================
# 数据库服务配置
# ============================================

# --- Qdrant 向量数据库 ---
# 用途：存储 RAG 文档向量、记忆向量
# 选项A：使用远程服务（默认）
QDRANT_URL=http://8.147.130.215:6333
# 选项B：使用本地 Docker
# QDRANT_URL=http://localhost:6333

# 可选：Qdrant API Key（如启用认证）
QDRANT_API_KEY=

# --- Neo4j 知识图谱 ---
# 用途：存储灾害关系、装备推荐、案例库
# 选项A：使用远程服务（默认）
NEO4J_URI=bolt://8.147.130.215:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=example-neo4j
# 选项B：使用本地 Docker
# NEO4J_URI=bolt://localhost:7687
# NEO4J_USER=neo4j
# NEO4J_PASSWORD=your_password_here

# --- PostgreSQL 关系数据库 ---
# 用途：存储 Checkpoint、审计日志、操作数据
# 选项A：使用远程服务（默认）
POSTGRES_DSN=postgresql://rescue:rescue_password@8.147.130.215:19532/rescue_system
# 选项B：使用本地 Docker
# POSTGRES_DSN=postgresql://rescue:rescue_password@localhost:5432/rescue_system

# --- Checkpoint SQLite（可选，用于本地开发）---
# 用途：轻量级 Checkpoint 存储，用于开发测试
CHECKPOINT_SQLITE_PATH=./temp/checkpoints.sqlite3

# ============================================
# LLM 和 Embedding 配置
# ============================================

# --- LLM API 配置（必需）---
# 选项A：智谱 AI（推荐，国内访问快）
OPENAI_BASE_URL=https://open.bigmodel.cn/api/paas/v4
OPENAI_API_KEY=your_zhipu_api_key_here
LLM_MODEL=glm-4-flash
# 选项B：本地 vLLM（需要 GPU）
# OPENAI_BASE_URL=http://localhost:8000/v1
# OPENAI_API_KEY=dummy
# LLM_MODEL=qwen2.5-7b-instruct

# --- Embedding 模型配置 ---
# 智谱 Embedding（与 LLM 配套）
EMBEDDING_MODEL=embedding-3
EMBEDDING_DIM=2048
# 本地 Embedding（需单独部署）
# EMBEDDING_MODEL=bge-large-zh-v1.5
# EMBEDDING_DIM=1024

# ============================================
# ASR 语音识别配置（可选）
# ============================================
# 说明：支持自动故障转移，主Provider故障时自动切换到备用Provider
# 至少配置一个Provider，推荐配置双Provider实现高可用

# --- 主Provider（Primary）---
# 推荐：阿里云百炼（在线服务，识别准确率高）
ASR_PRIMARY_PROVIDER=aliyun
DASHSCOPE_API_KEY=your_dashscope_api_key_here
# 获取方式：https://dashscope.console.aliyun.com/

# --- 备用Provider（Fallback）---
# 推荐：本地 FunASR（私有化部署，无网络依赖）
ASR_FALLBACK_PROVIDER=local
VOICE_ASR_WS_URL=wss://127.0.0.1:10097
# 部署方式：参考 docs/modules/asr/quick-reference.md

# --- ASR 可选配置 ---
# 热词配置（JSON 格式，提升特定词汇识别率）
FUNASR_HOTWORDS_JSON=
# 音频分块大小（字节）
FUNASR_CHUNK_SIZE=
# 健康检查间隔（秒，默认30秒）
HEALTH_CHECK_INTERVAL=30

# ============================================
# 应用配置
# ============================================

# --- 服务端口 ---
PORT=8008

# --- 代理配置（如需要）---
# 注意：本地开发建议禁用代理，避免连接问题
NO_PROXY=127.0.0.1,localhost

# ============================================
# 配置验证检查清单
# ============================================
# [ ] 数据库服务可访问（远程或本地 Docker）
# [ ] OPENAI_API_KEY 已配置且有效
# [ ] 至少配置一个 ASR Provider（如需语音识别）
# [ ] NEO4J_PASSWORD 已修改（生产环境必需）
# [ ] POSTGRES_DSN 已配置正确的凭据

# ============================================
# 快速启动步骤
# ============================================
# 1. 复制模板: cp config/.env.example config/dev.local.env
# 2. 编辑配置: vim config/dev.local.env
# 3. 环境检查: ./scripts/check-env.sh
# 4. 初始化DB: ./scripts/init-db.sh
# 5. 启动服务: ./scripts/dev-run.sh
# 6. 验证健康: curl http://localhost:8008/healthz
